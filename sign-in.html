<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign-in page</title>
  <link rel="stylesheet" href="./bootstrap-5.1.3-dist/css/bootstrap.css" />
  <link rel="stylesheet" href="./sign-in.css">
</head>
<body>
   <video autoplay muted loop id="video-background">
      <source src="./assets/course-video.mp4">
    </video>
    <div id="signInBox" class="">
      <h2 class="fw-normal text-center text-success display-4">Welcome!</h2>
        <h4 class="text-center fw-bolder text-light">Sign-in your<span class="text-warning"> *swaga Account* </span>Here</h4>
    <form action="">
    <label class="mb-0" for="loginUserName">Email\Username<span class="text-danger fw-bold">*</span></label>
    <input type="text" placeholder="Enter Your Email\Username" id="loginUserName" class="form-control rounded-3 py-2">
    </form>
  
    <form class="">
      <label class="mt-0" id="forPinConfirm">Password<span class="text-danger fw-bold">*</span></label>
      <div class="password-confirm rounded-3 ">
        <input type="password" placeholder="Enter Your Password" id="loginPass" class="form-control rounded-3">
        <img src="pass-hide-confirm.png" onclick="passHids()" class="pass-icon-confirm " id="pass-icon-confirm">
      </div>
    </form>
    <button class="btn btn-primary fw-bold" onclick="loginUser()">Login</button>
  </div>
  <script>
    // var c;
  var d;
  // function passs()
  //       {
  //         if(c==1)
  //         {
  //           document.getElementById('loginUserName').type='password';
  //           document.getElementById('pass-icon').src='pass-hide.png';
  //           c=0;
  //         }
  //         else
  //         {
  //           document.getElementById('loginUserName').type='text';
  //           document.getElementById('pass-icon').src='pass-show.png';
  //           c=1;
  //         }
  //         // pashHid()
  //       }

  // for passwor confirmation
  function passHids()
        {
          if(d==1)
          {
            document.getElementById('loginPass').type='password';
            document.getElementById('pass-icon-confirm').src='pass-hide-confirm.png';
            d=0;
          }
          else
          {
            document.getElementById('loginPass').type='text';
            document.getElementById('pass-icon-confirm').src='pass-show-confirm.png';
            d=1;
          }
        }
        
        const loginUser = () =>{
          let allUsers = JSON.parse(localStorage.getItem("bankUsers"))
          console.log(allUsers.length);
          if(allUsers.length >= 0){
            let loginUserEmail = loginUserName.value;
            let loginUserPass = loginPass.value;
            // console.log(loginUserEmail);
            // console.log(loginUserPass);
            // let allUsers = JSON.parse(localStorage.getItem("bankUsers"))
            // console.log(checkUser);
            let confirmLogin = allUsers.findIndex(u => u.signUpEmail == loginUserEmail && u.signUpUserPass == loginUserPass)
            console.log(confirmLogin);
            if(loginUserName.value == '' || loginPass.value == ""){
              alert("Fill the login input to continue")
            }
            else if(confirmLogin < 0){
              alert("No user Register with this details. Input correct details to continue")
            }
            else{
              localStorage.setItem("currentLogin", loginUserEmail) 
              alert("Welcome")
              window.open('dashboard.html', '_self')
            }
          }else{
            alert("You have not sign-in. Go home to signIn")
          }
        }
  </script>
</body>
</html>